# DEMENT
Decomposition Model of Enzymatic Traits maintained by Steven Allison

DEMENT is an agent-based numerical simulation model, open-source, coded in R, and available for all operating systems. The model uses microbial trait values and correlations to predict rates of organic matter decomposition. The most recent model version represents traits related to enzyme kinetics, enzyme production, growth efficiency, stoichiometry, and responses to temperature and moisture availability. During a model run, a large number (>100) of bacterial and fungal taxa are allowed to compete on a spatial grid representing the surface of decomposing organic material. Each taxon possesses a suite of physiological traits that are assigned based on trait correlations. Enzymes produced by the microbial taxa interact locally with substrates to generate monomers that are available for uptake. The model predicts microbial community composition by simulating the abundances of the initial taxa at a daily time step. Enzymatic degradation is a Michaelis-Menten process with Arrhenius temperature sensitivity functions built into Vmax and Km kinetic parameters.

Instructions to get started

The current set of files is configured to run in batch mode, for example on a computer cluster, but you can also run in batch mode on your desktop computer from the command line.

1) Download all of the files into the same directory.

2) Create a subdirectory called "params".

3) Move the "params1.txt" file into the params subdirectory.

4) Modify any parameter values you wish (parameter descriptions are in "ParamDescription.txt").

5) Open a terminal or command prompt in the directory you created with the model files.

6) At the prompt, type (without the quotes): "Rscript --no-restore DEMENTBatch.R 150917085400 1".

The program will create a directory called "outputs" where graphical outputs and the R workspace will be saved. The last two command line arguments are used to name the output files, locate the correct parameter file, and seed the random number generator (depending on the settings in the parameter file). The penultimate argument is a 12-character timestamp (YYMMDDHHMMSS) and the last is an integer. These arguments can be entered directly from the command line, or generated by another program. For example, in the shell script "DEMENT.ge", I generate the timestamp from the current time and use the task ID as the integer. The timestamp (plus the integer) is used to name the output files, so be aware that output files may be overwritten if you re-use the same command line arguments. Note that the timestamp must correspond to a valid date and time (for example 000000000000 is not valid because there is no month 00). The integer (last command line argument) is also used to match up a specific model run with the parameter file, so the command line argument must match the integer "XX" in the "paramsXX.txt" file. The sum of the timestamp and the integer is is also the default seed for the random number generator; if you want to seed the random number generator with a specific value (to replicate a previous run for instance), then change the "set.seed" parameter to 1 in the parameter file. This will override the command line argument. However, the command line timestamp will still be used to name the output files.

Keep in mind that the program is designed to optimize speed at the expense of memory. Large grid sizes and high numbers of taxa will take up a large amount of memory (e.g. 32G RAM for a 100x100 grid with 100 taxa). Be sure your machine has sufficient memory available.
